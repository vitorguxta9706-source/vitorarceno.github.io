<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Vitor Arceno ‚Äì Im√≥veis em Balne√°rio Pi√ßarras</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="description" content="Im√≥veis em Balne√°rio Pi√ßarras com atendimento profissional.">
<meta property="og:title" content="Vitor Arceno ‚Äì Im√≥veis">
<meta property="og:type" content="website">

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
:root{--green:#00ff88;--bg:#0e0e0e;--card:#161616}
body{margin:0;font-family:Inter,Arial;background:var(--bg);color:#fff}
header{min-height:60vh;display:flex;align-items:center;justify-content:center;text-align:center}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:30px;padding:60px}
.card{background:var(--card);border-radius:20px;overflow:hidden;cursor:pointer}
.card img{width:100%;height:200px;object-fit:cover}
.card-body{padding:20px}
button{background:var(--green);border:none;padding:14px 28px;border-radius:30px;font-weight:bold;cursor:pointer}
#modal{position:fixed;inset:0;background:#000e;display:none;align-items:center;justify-content:center;z-index:10}
#modal .box{background:#111;padding:30px;border-radius:20px;max-width:800px;width:95%}
.gallery img{width:100%;margin-bottom:10px;border-radius:10px}
footer{text-align:center;padding:30px;background:#000;color:#777}
</style>
</head>

<body>

<header>
  <div>
    <h1>Vitor Arceno</h1>
    <p>Especialista em im√≥veis em Balne√°rio Pi√ßarras</p>
    <p style="opacity:.6;margin-top:20px">‚¨áÔ∏è Confira os im√≥veis dispon√≠veis</p>
  </div>
</header>

<section class="grid" id="lista"></section>

<div id="modal"></div>

<footer>
  <p>üìû (47) 92000-6793 ‚Ä¢ üìß vitor_arceno@hotmail.com</p>
  <p>¬© 2026 Vitor Arceno</p>
</footer>

<script>
/* ‚úÖ SUPABASE SOMENTE LEITURA */
const supabaseClient = supabase.createClient(
  "https://zctvqhghwrvbksjohjxv.supabase.co",
  "sb_publishable_QXsGONCWjyvuXUZRljGwsA_tB2smuY7"
);

const lista = document.getElementById("lista");
const modal = document.getElementById("modal");

/* ‚úÖ CARREGA IM√ìVEIS */
async function carregarImoveis(){
  const { data, error } = await supabaseClient
    .from("imoveis")
    .select("*")
    .order("created_at",{ascending:false});

  if(error){
    lista.innerHTML="<p>Erro ao carregar im√≥veis.</p>";
    console.error(error);
    return;
  }

  lista.innerHTML="";
  data.forEach(i=>{
    lista.innerHTML+=`
      <div class="card" onclick="abrir('${i.slug}')">
        <img src="${i.fotos[0]}">
        <div class="card-body">
          <h3>${i.titulo}</h3>
          <p>${i.bairro} ‚Ä¢ ${i.tipo}</p>
          <strong>R$ ${Number(i.valor).toLocaleString()}</strong>
        </div>
      </div>`;
  });
}

/* ‚úÖ MODAL DO IM√ìVEL */
async function abrir(slug){
  const { data } = await supabaseClient
    .from("imoveis")
    .select("*")
    .eq("slug",slug)
    .single();

  history.pushState({}, "", `/imovel/${slug}`);

  modal.innerHTML=`
    <div class="box">
      <h2>${data.titulo}</h2>
      <div class="gallery">
        ${data.fotos.map(f=>`<img src="${f}">`).join("")}
      </div>
      <p>${data.dormitorios} dorm ‚Ä¢ ${data.banheiros} ban ‚Ä¢ ${data.vagas} vagas</p>
      <p>${data.area} m¬≤</p>
      <strong>R$ ${Number(data.valor).toLocaleString()}</strong><br><br>
      <a href="https://wa.me/5547920006793?text=Tenho interesse no ${data.titulo}" target="_blank">
        <button>Falar no WhatsApp</button>
      </a><br><br>
      <button onclick="fechar()">Fechar</button>
    </div>`;
  modal.style.display="flex";
}

function fechar(){
  modal.style.display="none";
  history.pushState({}, "", "/");
}

/* ‚úÖ INICIALIZA */
window.onload=()=>{
  carregarImoveis();
  const slug = location.pathname.split("/imovel/")[1];
  if(slug) abrir(slug);
};
</script>

</body>
</html>
